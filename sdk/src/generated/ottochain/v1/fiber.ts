// Code generated by protoc-gen-ts_proto. DO NOT EDIT.
// versions:
//   protoc-gen-ts_proto  v2.11.2
//   protoc               v6.33.5
// source: ottochain/v1/fiber.proto

/* eslint-disable */
import { Address, FiberOrdinal, SnapshotOrdinal, StateId } from "./common";

export const protobufPackage = "ottochain.v1";

/** Fiber lifecycle status */
export enum FiberStatus {
  FIBER_STATUS_UNSPECIFIED = 0,
  FIBER_STATUS_ACTIVE = 1,
  FIBER_STATUS_ARCHIVED = 2,
  FIBER_STATUS_FAILED = 3,
  UNRECOGNIZED = -1,
}

export function fiberStatusFromJSON(object: any): FiberStatus {
  switch (object) {
    case 0:
    case "FIBER_STATUS_UNSPECIFIED":
      return FiberStatus.FIBER_STATUS_UNSPECIFIED;
    case 1:
    case "FIBER_STATUS_ACTIVE":
      return FiberStatus.FIBER_STATUS_ACTIVE;
    case 2:
    case "FIBER_STATUS_ARCHIVED":
      return FiberStatus.FIBER_STATUS_ARCHIVED;
    case 3:
    case "FIBER_STATUS_FAILED":
      return FiberStatus.FIBER_STATUS_FAILED;
    case -1:
    case "UNRECOGNIZED":
    default:
      return FiberStatus.UNRECOGNIZED;
  }
}

export function fiberStatusToJSON(object: FiberStatus): string {
  switch (object) {
    case FiberStatus.FIBER_STATUS_UNSPECIFIED:
      return "FIBER_STATUS_UNSPECIFIED";
    case FiberStatus.FIBER_STATUS_ACTIVE:
      return "FIBER_STATUS_ACTIVE";
    case FiberStatus.FIBER_STATUS_ARCHIVED:
      return "FIBER_STATUS_ARCHIVED";
    case FiberStatus.FIBER_STATUS_FAILED:
      return "FIBER_STATUS_FAILED";
    case FiberStatus.UNRECOGNIZED:
    default:
      return "UNRECOGNIZED";
  }
}

/** Access control policy for scripts */
export interface AccessControlPolicy {
  policy?: { $case: "public"; public: PublicAccess } | { $case: "whitelist"; whitelist: WhitelistAccess } | {
    $case: "fiberOwned";
    fiberOwned: FiberOwnedAccess;
  } | undefined;
}

export interface PublicAccess {
}

export interface WhitelistAccess {
  addresses: Address[];
}

export interface FiberOwnedAccess {
  fiberId: string;
}

/** State machine definition */
export interface StateMachineDefinition {
  states?: { [key: string]: any } | undefined;
  initialState?: StateId | undefined;
  transitions: { [key: string]: any }[];
  metadata?: { [key: string]: any } | undefined;
}

/** Emitted event from state machine transition */
export interface EmittedEvent {
  name: string;
  data?: any | undefined;
  destination?: string | undefined;
}

/** Event receipt - log entry for state machine transition */
export interface EventReceipt {
  fiberId: string;
  sequenceNumber?: FiberOrdinal | undefined;
  eventName: string;
  ordinal?: SnapshotOrdinal | undefined;
  fromState?: StateId | undefined;
  toState?: StateId | undefined;
  success: boolean;
  gasUsed: number;
  triggersFired: number;
  errorMessage?: string | undefined;
  sourceFiberId?: string | undefined;
  emittedEvents: EmittedEvent[];
}

/** Script invocation - log entry for script oracle call */
export interface ScriptInvocation {
  fiberId: string;
  method: string;
  args?: any | undefined;
  result?: any | undefined;
  gasUsed: number;
  invokedAt?: SnapshotOrdinal | undefined;
  invokedBy?: Address | undefined;
}

/** Fiber log entry - union of event receipt or script invocation */
export interface FiberLogEntry {
  entry?: { $case: "eventReceipt"; eventReceipt: EventReceipt } | {
    $case: "scriptInvocation";
    scriptInvocation: ScriptInvocation;
  } | undefined;
}

function createBaseAccessControlPolicy(): AccessControlPolicy {
  return { policy: undefined };
}

export const AccessControlPolicy: MessageFns<AccessControlPolicy> = {
  fromJSON(object: any): AccessControlPolicy {
    return {
      policy: isSet(object.public)
        ? { $case: "public", public: PublicAccess.fromJSON(object.public) }
        : isSet(object.whitelist)
        ? { $case: "whitelist", whitelist: WhitelistAccess.fromJSON(object.whitelist) }
        : isSet(object.fiberOwned)
        ? { $case: "fiberOwned", fiberOwned: FiberOwnedAccess.fromJSON(object.fiberOwned) }
        : isSet(object.fiber_owned)
        ? { $case: "fiberOwned", fiberOwned: FiberOwnedAccess.fromJSON(object.fiber_owned) }
        : undefined,
    };
  },

  toJSON(message: AccessControlPolicy): unknown {
    const obj: any = {};
    if (message.policy?.$case === "public") {
      obj.public = PublicAccess.toJSON(message.policy.public);
    } else if (message.policy?.$case === "whitelist") {
      obj.whitelist = WhitelistAccess.toJSON(message.policy.whitelist);
    } else if (message.policy?.$case === "fiberOwned") {
      obj.fiberOwned = FiberOwnedAccess.toJSON(message.policy.fiberOwned);
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<AccessControlPolicy>, I>>(base?: I): AccessControlPolicy {
    return AccessControlPolicy.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<AccessControlPolicy>, I>>(object: I): AccessControlPolicy {
    const message = createBaseAccessControlPolicy();
    switch (object.policy?.$case) {
      case "public": {
        if (object.policy?.public !== undefined && object.policy?.public !== null) {
          message.policy = { $case: "public", public: PublicAccess.fromPartial(object.policy.public) };
        }
        break;
      }
      case "whitelist": {
        if (object.policy?.whitelist !== undefined && object.policy?.whitelist !== null) {
          message.policy = { $case: "whitelist", whitelist: WhitelistAccess.fromPartial(object.policy.whitelist) };
        }
        break;
      }
      case "fiberOwned": {
        if (object.policy?.fiberOwned !== undefined && object.policy?.fiberOwned !== null) {
          message.policy = { $case: "fiberOwned", fiberOwned: FiberOwnedAccess.fromPartial(object.policy.fiberOwned) };
        }
        break;
      }
    }
    return message;
  },
};

function createBasePublicAccess(): PublicAccess {
  return {};
}

export const PublicAccess: MessageFns<PublicAccess> = {
  fromJSON(_: any): PublicAccess {
    return {};
  },

  toJSON(_: PublicAccess): unknown {
    const obj: any = {};
    return obj;
  },

  create<I extends Exact<DeepPartial<PublicAccess>, I>>(base?: I): PublicAccess {
    return PublicAccess.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<PublicAccess>, I>>(_: I): PublicAccess {
    const message = createBasePublicAccess();
    return message;
  },
};

function createBaseWhitelistAccess(): WhitelistAccess {
  return { addresses: [] };
}

export const WhitelistAccess: MessageFns<WhitelistAccess> = {
  fromJSON(object: any): WhitelistAccess {
    return {
      addresses: globalThis.Array.isArray(object?.addresses)
        ? object.addresses.map((e: any) => Address.fromJSON(e))
        : [],
    };
  },

  toJSON(message: WhitelistAccess): unknown {
    const obj: any = {};
    if (message.addresses?.length) {
      obj.addresses = message.addresses.map((e) => Address.toJSON(e));
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<WhitelistAccess>, I>>(base?: I): WhitelistAccess {
    return WhitelistAccess.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<WhitelistAccess>, I>>(object: I): WhitelistAccess {
    const message = createBaseWhitelistAccess();
    message.addresses = object.addresses?.map((e) => Address.fromPartial(e)) || [];
    return message;
  },
};

function createBaseFiberOwnedAccess(): FiberOwnedAccess {
  return { fiberId: "" };
}

export const FiberOwnedAccess: MessageFns<FiberOwnedAccess> = {
  fromJSON(object: any): FiberOwnedAccess {
    return {
      fiberId: isSet(object.fiberId)
        ? globalThis.String(object.fiberId)
        : isSet(object.fiber_id)
        ? globalThis.String(object.fiber_id)
        : "",
    };
  },

  toJSON(message: FiberOwnedAccess): unknown {
    const obj: any = {};
    if (message.fiberId !== "") {
      obj.fiberId = message.fiberId;
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<FiberOwnedAccess>, I>>(base?: I): FiberOwnedAccess {
    return FiberOwnedAccess.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<FiberOwnedAccess>, I>>(object: I): FiberOwnedAccess {
    const message = createBaseFiberOwnedAccess();
    message.fiberId = object.fiberId ?? "";
    return message;
  },
};

function createBaseStateMachineDefinition(): StateMachineDefinition {
  return { states: undefined, initialState: undefined, transitions: [], metadata: undefined };
}

export const StateMachineDefinition: MessageFns<StateMachineDefinition> = {
  fromJSON(object: any): StateMachineDefinition {
    return {
      states: isObject(object.states) ? object.states : undefined,
      initialState: isSet(object.initialState)
        ? StateId.fromJSON(object.initialState)
        : isSet(object.initial_state)
        ? StateId.fromJSON(object.initial_state)
        : undefined,
      transitions: globalThis.Array.isArray(object?.transitions) ? [...object.transitions] : [],
      metadata: isObject(object.metadata) ? object.metadata : undefined,
    };
  },

  toJSON(message: StateMachineDefinition): unknown {
    const obj: any = {};
    if (message.states !== undefined) {
      obj.states = message.states;
    }
    if (message.initialState !== undefined) {
      obj.initialState = StateId.toJSON(message.initialState);
    }
    if (message.transitions?.length) {
      obj.transitions = message.transitions;
    }
    if (message.metadata !== undefined) {
      obj.metadata = message.metadata;
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<StateMachineDefinition>, I>>(base?: I): StateMachineDefinition {
    return StateMachineDefinition.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<StateMachineDefinition>, I>>(object: I): StateMachineDefinition {
    const message = createBaseStateMachineDefinition();
    message.states = object.states ?? undefined;
    message.initialState = (object.initialState !== undefined && object.initialState !== null)
      ? StateId.fromPartial(object.initialState)
      : undefined;
    message.transitions = object.transitions?.map((e) => e) || [];
    message.metadata = object.metadata ?? undefined;
    return message;
  },
};

function createBaseEmittedEvent(): EmittedEvent {
  return { name: "", data: undefined, destination: undefined };
}

export const EmittedEvent: MessageFns<EmittedEvent> = {
  fromJSON(object: any): EmittedEvent {
    return {
      name: isSet(object.name) ? globalThis.String(object.name) : "",
      data: isSet(object?.data) ? object.data : undefined,
      destination: isSet(object.destination) ? globalThis.String(object.destination) : undefined,
    };
  },

  toJSON(message: EmittedEvent): unknown {
    const obj: any = {};
    if (message.name !== "") {
      obj.name = message.name;
    }
    if (message.data !== undefined) {
      obj.data = message.data;
    }
    if (message.destination !== undefined) {
      obj.destination = message.destination;
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<EmittedEvent>, I>>(base?: I): EmittedEvent {
    return EmittedEvent.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<EmittedEvent>, I>>(object: I): EmittedEvent {
    const message = createBaseEmittedEvent();
    message.name = object.name ?? "";
    message.data = object.data ?? undefined;
    message.destination = object.destination ?? undefined;
    return message;
  },
};

function createBaseEventReceipt(): EventReceipt {
  return {
    fiberId: "",
    sequenceNumber: undefined,
    eventName: "",
    ordinal: undefined,
    fromState: undefined,
    toState: undefined,
    success: false,
    gasUsed: 0,
    triggersFired: 0,
    errorMessage: undefined,
    sourceFiberId: undefined,
    emittedEvents: [],
  };
}

export const EventReceipt: MessageFns<EventReceipt> = {
  fromJSON(object: any): EventReceipt {
    return {
      fiberId: isSet(object.fiberId)
        ? globalThis.String(object.fiberId)
        : isSet(object.fiber_id)
        ? globalThis.String(object.fiber_id)
        : "",
      sequenceNumber: isSet(object.sequenceNumber)
        ? FiberOrdinal.fromJSON(object.sequenceNumber)
        : isSet(object.sequence_number)
        ? FiberOrdinal.fromJSON(object.sequence_number)
        : undefined,
      eventName: isSet(object.eventName)
        ? globalThis.String(object.eventName)
        : isSet(object.event_name)
        ? globalThis.String(object.event_name)
        : "",
      ordinal: isSet(object.ordinal) ? SnapshotOrdinal.fromJSON(object.ordinal) : undefined,
      fromState: isSet(object.fromState)
        ? StateId.fromJSON(object.fromState)
        : isSet(object.from_state)
        ? StateId.fromJSON(object.from_state)
        : undefined,
      toState: isSet(object.toState)
        ? StateId.fromJSON(object.toState)
        : isSet(object.to_state)
        ? StateId.fromJSON(object.to_state)
        : undefined,
      success: isSet(object.success) ? globalThis.Boolean(object.success) : false,
      gasUsed: isSet(object.gasUsed)
        ? globalThis.Number(object.gasUsed)
        : isSet(object.gas_used)
        ? globalThis.Number(object.gas_used)
        : 0,
      triggersFired: isSet(object.triggersFired)
        ? globalThis.Number(object.triggersFired)
        : isSet(object.triggers_fired)
        ? globalThis.Number(object.triggers_fired)
        : 0,
      errorMessage: isSet(object.errorMessage)
        ? globalThis.String(object.errorMessage)
        : isSet(object.error_message)
        ? globalThis.String(object.error_message)
        : undefined,
      sourceFiberId: isSet(object.sourceFiberId)
        ? globalThis.String(object.sourceFiberId)
        : isSet(object.source_fiber_id)
        ? globalThis.String(object.source_fiber_id)
        : undefined,
      emittedEvents: globalThis.Array.isArray(object?.emittedEvents)
        ? object.emittedEvents.map((e: any) => EmittedEvent.fromJSON(e))
        : globalThis.Array.isArray(object?.emitted_events)
        ? object.emitted_events.map((e: any) => EmittedEvent.fromJSON(e))
        : [],
    };
  },

  toJSON(message: EventReceipt): unknown {
    const obj: any = {};
    if (message.fiberId !== "") {
      obj.fiberId = message.fiberId;
    }
    if (message.sequenceNumber !== undefined) {
      obj.sequenceNumber = FiberOrdinal.toJSON(message.sequenceNumber);
    }
    if (message.eventName !== "") {
      obj.eventName = message.eventName;
    }
    if (message.ordinal !== undefined) {
      obj.ordinal = SnapshotOrdinal.toJSON(message.ordinal);
    }
    if (message.fromState !== undefined) {
      obj.fromState = StateId.toJSON(message.fromState);
    }
    if (message.toState !== undefined) {
      obj.toState = StateId.toJSON(message.toState);
    }
    if (message.success !== false) {
      obj.success = message.success;
    }
    if (message.gasUsed !== 0) {
      obj.gasUsed = Math.round(message.gasUsed);
    }
    if (message.triggersFired !== 0) {
      obj.triggersFired = Math.round(message.triggersFired);
    }
    if (message.errorMessage !== undefined) {
      obj.errorMessage = message.errorMessage;
    }
    if (message.sourceFiberId !== undefined) {
      obj.sourceFiberId = message.sourceFiberId;
    }
    if (message.emittedEvents?.length) {
      obj.emittedEvents = message.emittedEvents.map((e) => EmittedEvent.toJSON(e));
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<EventReceipt>, I>>(base?: I): EventReceipt {
    return EventReceipt.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<EventReceipt>, I>>(object: I): EventReceipt {
    const message = createBaseEventReceipt();
    message.fiberId = object.fiberId ?? "";
    message.sequenceNumber = (object.sequenceNumber !== undefined && object.sequenceNumber !== null)
      ? FiberOrdinal.fromPartial(object.sequenceNumber)
      : undefined;
    message.eventName = object.eventName ?? "";
    message.ordinal = (object.ordinal !== undefined && object.ordinal !== null)
      ? SnapshotOrdinal.fromPartial(object.ordinal)
      : undefined;
    message.fromState = (object.fromState !== undefined && object.fromState !== null)
      ? StateId.fromPartial(object.fromState)
      : undefined;
    message.toState = (object.toState !== undefined && object.toState !== null)
      ? StateId.fromPartial(object.toState)
      : undefined;
    message.success = object.success ?? false;
    message.gasUsed = object.gasUsed ?? 0;
    message.triggersFired = object.triggersFired ?? 0;
    message.errorMessage = object.errorMessage ?? undefined;
    message.sourceFiberId = object.sourceFiberId ?? undefined;
    message.emittedEvents = object.emittedEvents?.map((e) => EmittedEvent.fromPartial(e)) || [];
    return message;
  },
};

function createBaseScriptInvocation(): ScriptInvocation {
  return {
    fiberId: "",
    method: "",
    args: undefined,
    result: undefined,
    gasUsed: 0,
    invokedAt: undefined,
    invokedBy: undefined,
  };
}

export const ScriptInvocation: MessageFns<ScriptInvocation> = {
  fromJSON(object: any): ScriptInvocation {
    return {
      fiberId: isSet(object.fiberId)
        ? globalThis.String(object.fiberId)
        : isSet(object.fiber_id)
        ? globalThis.String(object.fiber_id)
        : "",
      method: isSet(object.method) ? globalThis.String(object.method) : "",
      args: isSet(object?.args) ? object.args : undefined,
      result: isSet(object?.result) ? object.result : undefined,
      gasUsed: isSet(object.gasUsed)
        ? globalThis.Number(object.gasUsed)
        : isSet(object.gas_used)
        ? globalThis.Number(object.gas_used)
        : 0,
      invokedAt: isSet(object.invokedAt)
        ? SnapshotOrdinal.fromJSON(object.invokedAt)
        : isSet(object.invoked_at)
        ? SnapshotOrdinal.fromJSON(object.invoked_at)
        : undefined,
      invokedBy: isSet(object.invokedBy)
        ? Address.fromJSON(object.invokedBy)
        : isSet(object.invoked_by)
        ? Address.fromJSON(object.invoked_by)
        : undefined,
    };
  },

  toJSON(message: ScriptInvocation): unknown {
    const obj: any = {};
    if (message.fiberId !== "") {
      obj.fiberId = message.fiberId;
    }
    if (message.method !== "") {
      obj.method = message.method;
    }
    if (message.args !== undefined) {
      obj.args = message.args;
    }
    if (message.result !== undefined) {
      obj.result = message.result;
    }
    if (message.gasUsed !== 0) {
      obj.gasUsed = Math.round(message.gasUsed);
    }
    if (message.invokedAt !== undefined) {
      obj.invokedAt = SnapshotOrdinal.toJSON(message.invokedAt);
    }
    if (message.invokedBy !== undefined) {
      obj.invokedBy = Address.toJSON(message.invokedBy);
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<ScriptInvocation>, I>>(base?: I): ScriptInvocation {
    return ScriptInvocation.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<ScriptInvocation>, I>>(object: I): ScriptInvocation {
    const message = createBaseScriptInvocation();
    message.fiberId = object.fiberId ?? "";
    message.method = object.method ?? "";
    message.args = object.args ?? undefined;
    message.result = object.result ?? undefined;
    message.gasUsed = object.gasUsed ?? 0;
    message.invokedAt = (object.invokedAt !== undefined && object.invokedAt !== null)
      ? SnapshotOrdinal.fromPartial(object.invokedAt)
      : undefined;
    message.invokedBy = (object.invokedBy !== undefined && object.invokedBy !== null)
      ? Address.fromPartial(object.invokedBy)
      : undefined;
    return message;
  },
};

function createBaseFiberLogEntry(): FiberLogEntry {
  return { entry: undefined };
}

export const FiberLogEntry: MessageFns<FiberLogEntry> = {
  fromJSON(object: any): FiberLogEntry {
    return {
      entry: isSet(object.eventReceipt)
        ? { $case: "eventReceipt", eventReceipt: EventReceipt.fromJSON(object.eventReceipt) }
        : isSet(object.event_receipt)
        ? { $case: "eventReceipt", eventReceipt: EventReceipt.fromJSON(object.event_receipt) }
        : isSet(object.scriptInvocation)
        ? { $case: "scriptInvocation", scriptInvocation: ScriptInvocation.fromJSON(object.scriptInvocation) }
        : isSet(object.script_invocation)
        ? { $case: "scriptInvocation", scriptInvocation: ScriptInvocation.fromJSON(object.script_invocation) }
        : undefined,
    };
  },

  toJSON(message: FiberLogEntry): unknown {
    const obj: any = {};
    if (message.entry?.$case === "eventReceipt") {
      obj.eventReceipt = EventReceipt.toJSON(message.entry.eventReceipt);
    } else if (message.entry?.$case === "scriptInvocation") {
      obj.scriptInvocation = ScriptInvocation.toJSON(message.entry.scriptInvocation);
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<FiberLogEntry>, I>>(base?: I): FiberLogEntry {
    return FiberLogEntry.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<FiberLogEntry>, I>>(object: I): FiberLogEntry {
    const message = createBaseFiberLogEntry();
    switch (object.entry?.$case) {
      case "eventReceipt": {
        if (object.entry?.eventReceipt !== undefined && object.entry?.eventReceipt !== null) {
          message.entry = { $case: "eventReceipt", eventReceipt: EventReceipt.fromPartial(object.entry.eventReceipt) };
        }
        break;
      }
      case "scriptInvocation": {
        if (object.entry?.scriptInvocation !== undefined && object.entry?.scriptInvocation !== null) {
          message.entry = {
            $case: "scriptInvocation",
            scriptInvocation: ScriptInvocation.fromPartial(object.entry.scriptInvocation),
          };
        }
        break;
      }
    }
    return message;
  },
};

type Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;

export type DeepPartial<T> = T extends Builtin ? T
  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>
  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>
  : T extends { $case: string } ? { [K in keyof Omit<T, "$case">]?: DeepPartial<T[K]> } & { $case: T["$case"] }
  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }
  : Partial<T>;

type KeysOfUnion<T> = T extends T ? keyof T : never;
export type Exact<P, I extends P> = P extends Builtin ? P
  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };

function isObject(value: any): boolean {
  return typeof value === "object" && value !== null;
}

function isSet(value: any): boolean {
  return value !== null && value !== undefined;
}

export interface MessageFns<T> {
  fromJSON(object: any): T;
  toJSON(message: T): unknown;
  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;
  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;
}
